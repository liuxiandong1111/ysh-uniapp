{"version":3,"sources":[null,"webpack:///E:/ysh/ysh-uniapp/components/mp-echarts/mp-echarts.vue?5882","webpack:///E:/ysh/ysh-uniapp/components/mp-echarts/mp-echarts.vue?be5d","webpack:///E:/ysh/ysh-uniapp/components/mp-echarts/mp-echarts.vue?a693","uni-app:///components/mp-echarts/mp-echarts.vue","webpack:///E:/ysh/ysh-uniapp/components/mp-echarts/mp-echarts.vue?2578","webpack:///E:/ysh/ysh-uniapp/components/mp-echarts/mp-echarts.vue?3c93"],"names":["props","width","type","default","height","canvasId","option","onInit","data","chart","isReady","watch","deep","handler","mounted","methods","init","query","fields","node","size","exec","console","initOld","createChart","devicePixelRatio","renderer","context","updateChart","touchStart","seriesIndex","dataIndex","touchMove","touchEnd","resize","dispose","beforeDestroy"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACa;;;AAGtE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAomB,CAAgB,8nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACgBxnB;AAAA;AAAA;;;;;;;;;;;;;;;AADA;AAAA,gBAGA;EACAA;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;QACA;MACA;IACA;IACAG;MACAJ;MACAC;QAAA;MAAA;IACA;IACAI;MACAL;MACAC;IACA;EACA;EACAK;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACAL;MACAM;MACAC;QACA;MACA;IACA;EACA;EACAC;IAAA;IACA;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACAC,wCACAC;QAAAC;QAAAC;MAAA,GACAC;QACA;UACAC;UACA;UACA;UACA;QACA;QAEA;QACA;QAEA;UACAA;UACA;QACA;QAEA;UACArB;UACAG;QACA;;QAEA;QACA;UACA;QACA;;QAEA;QACA;UACA;QACA;QAEA;MACA;IACA;IAEAmB;MACA;MACA;;MAEA;MACAD;;MAEA;MACA;IACA;IAEAE;MACA;MACA;QACAvB;QACAG;QACAqB;QACAC;QACAC;MACA;IACA;IAEAC;MACA;QACA;MACA;MAEA;QACA;MACA;QACAN;MACA;IACA;IAEA;IACAO;MACA;QACA;QACA;UACA3B;UACA4B;UACAC;QACA;MACA;IACA;IAEAC;MACA;IAAA,CACA;IAEAC;MACA;QACA;UACA/B;QACA;MACA;IACA;IAEA;IACAgC;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;QACA;MACA;IACA;EACA;EACAC;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;AClLA;AAAA;AAAA;AAAA;AAAs3B,CAAgB,u3BAAG,EAAC,C;;;;;;;;;;;ACA14B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/mp-echarts/mp-echarts.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./mp-echarts.vue?vue&type=template&id=71d7dc78&\"\nvar renderjs\nimport script from \"./mp-echarts.vue?vue&type=script&lang=js&\"\nexport * from \"./mp-echarts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mp-echarts.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/mp-echarts/mp-echarts.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mp-echarts.vue?vue&type=template&id=71d7dc78&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mp-echarts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mp-echarts.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"chart-container\" :style=\"{ height: height, width: width }\">\r\n    <canvas \r\n      :id=\"canvasId\" \r\n      :canvas-id=\"canvasId\" \r\n      :style=\"{ width: width, height: height }\" \r\n      type=\"2d\"\r\n      @touchstart=\"touchStart\"\r\n      @touchmove=\"touchMove\"\r\n      @touchend=\"touchEnd\"\r\n    ></canvas>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n// 引入适配小程序的echarts核心\r\nimport * as echarts from './mp-echarts';\r\n\r\nexport default {\r\n  props: {\r\n    width: {\r\n      type: String,\r\n      default: '100%'\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '300px'\r\n    },\r\n    canvasId: {\r\n      type: String,\r\n      default() {\r\n        return `mp-echarts-${Date.now()}`;\r\n      }\r\n    },\r\n    option: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    onInit: {\r\n      type: Function,\r\n      default: null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      chart: null,\r\n      isReady: false\r\n    };\r\n  },\r\n  watch: {\r\n    option: {\r\n      deep: true,\r\n      handler(newVal) {\r\n        this.updateChart(newVal);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.init();\r\n    });\r\n  },\r\n  methods: {\r\n    init() {\r\n      const query = uni.createSelectorQuery().in(this);\r\n      query.select(`#${this.canvasId}`)\r\n        .fields({ node: true, size: true })\r\n        .exec((res) => {\r\n          if (!res || !res[0] || !res[0].node) {\r\n            console.error('找不到canvas节点');\r\n            // 尝试使用老方式\r\n            this.initOld();\r\n            return;\r\n          }\r\n          \r\n          const canvas = res[0].node;\r\n          const ctx = canvas.getContext('2d');\r\n          \r\n          if (!canvas || !ctx) {\r\n            console.error('无法获取canvas或上下文');\r\n            return;\r\n          }\r\n          \r\n          this.chart = this.createChart(canvas, ctx, {\r\n            width: res[0].width || 300,\r\n            height: res[0].height || 200\r\n          });\r\n          \r\n          // 如果有初始化回调，执行它\r\n          if (typeof this.onInit === 'function') {\r\n            this.onInit(this.chart);\r\n          }\r\n          \r\n          // 设置配置\r\n          if (this.option) {\r\n            this.updateChart(this.option);\r\n          }\r\n          \r\n          this.isReady = true;\r\n        });\r\n    },\r\n    \r\n    initOld() {\r\n      // 兼容旧版本小程序\r\n      const ctx = uni.createCanvasContext(this.canvasId, this);\r\n      \r\n      // 使用uni-app提供的简易图表库展示数据\r\n      console.warn('当前环境不支持完整的ECharts，降级使用简易图表');\r\n      \r\n      // 通知父组件初始化失败\r\n      this.$emit('init-failed');\r\n    },\r\n    \r\n    createChart(canvas, ctx, config) {\r\n      // 使用通过修改后的echarts初始化\r\n      return echarts.init(canvas, null, {\r\n        width: config.width,\r\n        height: config.height,\r\n        devicePixelRatio: uni.getSystemInfoSync().pixelRatio,\r\n        renderer: 'canvas',\r\n        context: ctx\r\n      });\r\n    },\r\n    \r\n    updateChart(option) {\r\n      if (!this.chart || !this.isReady) {\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        this.chart.setOption(option, true);\r\n      } catch (e) {\r\n        console.error('更新图表失败', e);\r\n      }\r\n    },\r\n    \r\n    // 图表交互事件\r\n    touchStart(e) {\r\n      if (this.chart && e.touches && e.touches.length > 0) {\r\n        const touch = e.touches[0];\r\n        this.chart.dispatchAction({\r\n          type: 'highlight',\r\n          seriesIndex: 0,\r\n          dataIndex: Math.floor(touch.x / 50) // 简化的索引计算\r\n        });\r\n      }\r\n    },\r\n    \r\n    touchMove(e) {\r\n      // 实现拖动/缩放等交互\r\n    },\r\n    \r\n    touchEnd(e) {\r\n      if (this.chart) {\r\n        this.chart.dispatchAction({\r\n          type: 'downplay'\r\n        });\r\n      }\r\n    },\r\n    \r\n    // 供父组件调用的刷新方法\r\n    resize() {\r\n      if (this.chart) {\r\n        this.chart.resize();\r\n      }\r\n    },\r\n    \r\n    // 供父组件调用的销毁方法\r\n    dispose() {\r\n      if (this.chart) {\r\n        this.chart.dispose();\r\n        this.chart = null;\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.dispose();\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.chart-container {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n}\r\n</style> ","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mp-echarts.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mp-echarts.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1747547066627\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}