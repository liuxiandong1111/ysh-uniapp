{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/admin/Desktop/ysh-uniapp-master/pages/message/message.vue?f870","webpack:////Users/admin/Desktop/ysh-uniapp-master/pages/message/message.vue?60a6","webpack:////Users/admin/Desktop/ysh-uniapp-master/pages/message/message.vue?f299","uni-app:///pages/message/message.vue","webpack:////Users/admin/Desktop/ysh-uniapp-master/pages/message/message.vue?4599","webpack:////Users/admin/Desktop/ysh-uniapp-master/pages/message/message.vue?e05b"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","showFilterOption","currentFilter","selectedMessages","messageList","page","pageSize","total","messageListTimer","computed","hasMoreData","onLoad","onShow","tabbarUtils","onHide","onUnload","methods","startMessageListPolling","console","clearMessageListPolling","clearInterval","loadMessageList","isReset","uni","title","params","page_size","msgApi","res","newMessages","icon","toggleSelect","showMessageDetail","item","content","showCancel","handleDelete","success","deleteMessage","id","type","handleMarkRead","markRead","index","handleMarkAllRead","messageIds","result","handleMarkAllAsRead","all","handleDeleteSelected","handleDeleteAll","handleSendSMS","request","client_id","message_id","loadMore"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACa;;;AAGnE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AAAA;AAAszB,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACkE10B;AACA;AACA;AAAA;AAAA;AAAA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;IACAC;;IAEA;IACA;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACA;MACA;;MAEA;MACA;QACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;QACAC;QACA;MACA;IACA;IACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBACA;kBACA;kBACA;gBACA;gBAAA;gBAGAC;kBACAC;gBACA;gBAEAC;kBACApB;kBACAqB;gBACA;gBAAA;gBAAA,OAEAC;cAAA;gBAAAC;gBACA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","file":"pages/message/message.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/message/message.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./message.vue?vue&type=template&id=a91f51d4&\"\nvar renderjs\nimport script from \"./message.vue?vue&type=script&lang=js&\"\nexport * from \"./message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./message.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/message/message.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=template&id=a91f51d4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.messageList.length\n  var l0 = !(g0 === 0)\n    ? _vm.__map(_vm.messageList, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var g1 = _vm.selectedMessages.includes(item.id)\n        return {\n          $orig: $orig,\n          g1: g1,\n        }\n      })\n    : null\n  var g2 = _vm.messageList.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"container\">\n\t\n\t\t<view class=\"action-bar\">\n\t\t\t<view class=\"action-btn-small\" @click=\"handleMarkAllRead\">\n\t\t\t\t<text>标记已读</text>\n\t\t\t</view>\n\t\t\t<view class=\"action-btn-small\" @click=\"handleDeleteSelected\">\n\t\t\t\t<text>删除</text>\n\t\t\t</view>\n\t\t\t<view class=\"action-btn-small\" @click=\"handleMarkAllAsRead\">\n\t\t\t\t<text>全部已读</text>\n\t\t\t</view>\n\t\t\t<view class=\"action-btn-small\" @click=\"handleDeleteAll\">\n\t\t\t\t<text>全部删除</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"message-list\">\n\t\t\t<view v-if=\"messageList.length === 0\" class=\"empty-message\">\n\t\t\t\t<text>暂无消息</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view v-else>\n\t\t\t\t<view class=\"message-item\" v-for=\"(item, index) in messageList\" :key=\"index\" :class=\"{ 'message-unread': item.status === 0 }\">\n\t\t\t\t\t<view class=\"checkbox\">\n\t\t\t\t\t\t<view class=\"checkbox-inner\" :class=\"{ checked: selectedMessages.includes(item.id) }\" @click=\"toggleSelect(item.id)\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"message-content\" @click=\"showMessageDetail(item)\">\n\t\t\t\t\t\t<view class=\"message-header\">\n\t\t\t\t\t\t\t<view class=\"message-names\">\n\t\t\t\t\t\t\t\t<text class=\"name-tag\" v-if=\"item.client_name\">客户: {{ item.client_name }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"message-time\">{{ item.ctime || '' }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<view class=\"message-body\">\n\t\t\t\t\t\t\t<text class=\"message-text\">{{ item.info || '' }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<view class=\"message-actions\">\n\t\t\t\t\t\t\t<view class=\"action-btn\" @click.stop=\"handleDelete(item.id)\">\n\t\t\t\t\t\t\t\t<text>删除</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"action-btn\" @click.stop=\"handleMarkRead(item.id)\" v-if=\"item.status === 0\">\n\t\t\t\t\t\t\t\t<text>标为已读</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"action-btn\" @click.stop=\"handleSendSMS(item)\">\n\t\t\t\t\t\t\t\t<text>发送短信</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"load-more\" v-if=\"messageList.length > 0\" @click=\"loadMore\">\n\t\t\t<text v-if=\"hasMoreData\">加载更多</text>\n\t\t\t<text v-else>没有更多数据了</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\t// import { getUserMsgList, handleUserMsg, getUserNoReadMsgList } from '@/api/msg.js';\n\timport msgApi from '@/api/msg.js';\n\timport tabbarUtils from '../../utils/tabbarUtils.js';\n\timport request from '@/utils/request.js';\n    \n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tshowFilterOption: false,\n\t\t\t\tcurrentFilter: '全部消息',\n\t\t\t\tselectedMessages: [],\n\t\t\t\tmessageList: [],\n\t\t\t\tpage: 1,\n\t\t\t\tpageSize: 10,\n\t\t\t\ttotal: 0,\n\t\t\t\tmessageListTimer: null // 轮询定时器\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\thasMoreData() {\n\t\t\t\treturn this.messageList.length < this.total;\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tthis.loadMessageList();\n\t\t\t// 创建定时器，每分钟刷新一次消息列表\n\t\t\tthis.startMessageListPolling();\n\t\t},\n\t\tonShow() {\n\t\t\t// App.vue 中已经处理了 tabbar 相关逻辑，这里不再需要单独处理\n\t\t\t// 每次页面显示时更新tabbar角标\n\t\t\ttabbarUtils.updateMessageBadge(1);\n\t\t\t\n\t\t\t// 如果没有定时器，重新启动\n\t\t\tif (!this.messageListTimer) {\n\t\t\t\tthis.startMessageListPolling();\n\t\t\t}\n\t\t},\n\t\tonHide() {\n\t\t\t// 页面隐藏时清除定时器\n\t\t\tthis.clearMessageListPolling();\n\t\t},\n\t\tonUnload() {\n\t\t\t// 页面卸载时清除定时器\n\t\t\tthis.clearMessageListPolling();\n\t\t},\n\t\tmethods: {\n\t\t\t// 启动消息列表轮询\n\t\t\tstartMessageListPolling() {\n\t\t\t\t// 如果已经存在定时器，先清除\n\t\t\t\tthis.clearMessageListPolling();\n\t\t\t\t\n\t\t\t\t// 创建新的定时器，60秒查询一次\n\t\t\t\tthis.messageListTimer = setInterval(() => {\n\t\t\t\t\tconsole.log('轮询刷新消息列表');\n\t\t\t\t\tthis.loadMessageList();\n\t\t\t\t}, 60000); // 60000毫秒 = 1分钟\n\t\t\t},\n\t\t\t\n\t\t\t// 清除消息列表轮询\n\t\t\tclearMessageListPolling() {\n\t\t\t\tif (this.messageListTimer) {\n\t\t\t\t\tclearInterval(this.messageListTimer);\n\t\t\t\t\tthis.messageListTimer = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 加载消息列表\n\t\t\tasync loadMessageList(isReset = true) {\n\t\t\t\tif (isReset) {\n\t\t\t\t\tthis.page = 1;\n\t\t\t\t\tthis.messageList = [];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: '加载中...'\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tpage: this.page,\n\t\t\t\t\t\tpage_size: this.pageSize\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tconst res = await msgApi.getUserMsgList(params);\n\t\t\t\t\tconsole.log(res, 'res')\n\t\t\t\t\t\n\t\t\t\t\tif (res.retCode === 200 && res.data) {\n\t\t\t\t\t\tconst newMessages = res.data.list || [];\n\t\t\t\t\t\tthis.total = res.data.total || 0;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (isReset) {\n\t\t\t\t\t\t\tthis.messageList = newMessages;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.messageList = [...this.messageList, ...newMessages];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.message || '获取消息失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('获取消息列表失败', error);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: error.message,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t} finally {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 切换选中状态\n\t\t\ttoggleSelect(id) {\n\t\t\t\tconst index = this.selectedMessages.findIndex(item => item === id);\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tthis.selectedMessages.push(id);\n\t\t\t\t} else {\n\t\t\t\t\tthis.selectedMessages.splice(index, 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 显示消息详情\n\t\t\tasync showMessageDetail(item) {\n\t\t\t\t// 如果消息未读，则标记为已读\n\t\t\t\tif (item.status === 0) {\n\t\t\t\t\tawait this.markRead(item.id);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 弹出消息详情\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '消息详情',\n\t\t\t\t\tcontent: item.info || '',\n\t\t\t\t\tshowCancel: false\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 处理删除单个消息\n\t\t\tasync handleDelete(id) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要删除此消息吗？',\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tawait this.deleteMessage(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 调用API删除消息\n\t\t\tasync deleteMessage(id) {\n\t\t\t\ttry {\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: '删除中...'\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tconst res = await msgApi.handleUserMsg({\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: 'del'\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif (res.success && res.retCode === 200) {\n\t\t\t\t\t\t// 从列表中删除\n\t\t\t\t\t\tthis.messageList = this.messageList.filter(item => item.id !== id);\n\t\t\t\t\t\tthis.selectedMessages = this.selectedMessages.filter(item => item !== id);\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.message || '删除失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('删除消息失败', error);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '删除消息失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t} finally {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 标记消息为已读\n\t\t\tasync handleMarkRead(id) {\n\t\t\t\tawait this.markRead(id);\n\t\t\t},\n\t\t\t\n\t\t\t// 调用API标记消息为已读\n\t\t\tasync markRead(id) {\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await msgApi.handleUserMsg({\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: 'update'\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif (res.success && res.retCode === 200) {\n\t\t\t\t\t\t// 更新本地消息状态\n\t\t\t\t\t\tconst index = this.messageList.findIndex(item => item.id === id);\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\tthis.messageList[index].status = 1; // 标记为已读\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 更新tabbar角标\n\t\t\t\t\t\ttabbarUtils.updateMessageBadge(1);\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '已标记为已读',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.message || '操作失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('标记已读失败', error);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '标记已读失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 标记选中消息为已读\n\t\t\tasync handleMarkAllRead() {\n\t\t\t\tif (this.selectedMessages.length === 0) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请先选择消息',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: `确定要将已选中的 ${this.selectedMessages.length} 条消息标记为已读吗？`,\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\t\ttitle: '处理中...'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 将id数组转为逗号分隔的字符串\n\t\t\t\t\t\t\t\tconst messageIds = this.selectedMessages.join(',');\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 批量标记为已读\n\t\t\t\t\t\t\t\tconst result = await msgApi.handleUserMsg({\n\t\t\t\t\t\t\t\t\tid: messageIds,\n\t\t\t\t\t\t\t\t\ttype: 'update'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(result.success && result.retCode === 200) {\n\t\t\t\t\t\t\t\t\t// 更新选中消息的状态\n\t\t\t\t\t\t\t\t\tfor (const id of this.selectedMessages) {\n\t\t\t\t\t\t\t\t\t\tconst index = this.messageList.findIndex(item => item.id === id);\n\t\t\t\t\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\t\t\t\t\tthis.messageList[index].status = 1;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 更新tabbar角标\n\t\t\t\t\t\t\t\t\ttabbarUtils.updateMessageBadge(1);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.selectedMessages = [];\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '操作成功',\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: result.message || '操作失败',\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error('批量标记已读失败', error);\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '操作失败',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 标记所有消息为已读\n\t\t\tasync handleMarkAllAsRead() {\n\t\t\t\tif (this.messageList.length === 0) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '暂无消息',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要将所有消息标记为已读吗？',\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\t\ttitle: '处理中...'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 使用all参数标记全部已读\n\t\t\t\t\t\t\t\tconst result = await msgApi.handleUserMsg({\n\t\t\t\t\t\t\t\t\tall: 1,\n\t\t\t\t\t\t\t\t\ttype: 'update'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(result.success && result.retCode === 200) {\n\t\t\t\t\t\t\t\t\t// 更新所有消息状态为已读\n\t\t\t\t\t\t\t\t\tthis.messageList.forEach(item => {\n\t\t\t\t\t\t\t\t\t\titem.status = 1;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 更新tabbar角标\n\t\t\t\t\t\t\t\t\ttabbarUtils.updateMessageBadge(1);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '已全部标记为已读',\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: result.message || '操作失败',\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error('全部标记已读失败', error);\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '操作失败',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 删除选中消息\n\t\t\tasync handleDeleteSelected() {\n\t\t\t\tif (this.selectedMessages.length === 0) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请先选择消息',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: `确定要删除已选中的 ${this.selectedMessages.length} 条消息吗？`,\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\t\ttitle: '删除中...'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 将id数组转为逗号分隔的字符串\n\t\t\t\t\t\t\t\tconst messageIds = this.selectedMessages.join(',');\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 批量删除\n\t\t\t\t\t\t\t\tconst result = await msgApi.handleUserMsg({\n\t\t\t\t\t\t\t\t\tid: messageIds,\n\t\t\t\t\t\t\t\t\ttype: 'del'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(result.success && result.retCode === 200) {\n\t\t\t\t\t\t\t\t\t// 从列表中移除被删除的消息\n\t\t\t\t\t\t\t\t\tthis.messageList = this.messageList.filter(\n\t\t\t\t\t\t\t\t\t\titem => !this.selectedMessages.includes(item.id)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.selectedMessages = [];\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: result.message || '删除失败',\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error('批量删除失败', error);\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '删除失败',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 删除所有消息\n\t\t\tasync handleDeleteAll() {\n\t\t\t\tif (this.messageList.length === 0) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '暂无消息',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要删除所有消息吗？',\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\t\ttitle: '删除中...'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 循环删除每条消息\n\t\t\t\t\t\t\t\tfor (const item of this.messageList) {\n\t\t\t\t\t\t\t\t\tawait this.deleteMessage(item.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.messageList = [];\n\t\t\t\t\t\t\t\tthis.selectedMessages = [];\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '已全部删除',\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error('全部删除失败', error);\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '删除失败',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 发送短信\n\t\t\thandleSendSMS(item) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '发送短信',\n\t\t\t\t\tcontent: `确定要给客户发送短信吗？`,\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\t\ttitle: '发送中...'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 调用发送短信API\n\t\t\t\t\t\t\t\tconst result = await request.post('/doc/send-sms', {\n\t\t\t\t\t\t\t\t\tclient_id: item.client_id,\n\t\t\t\t\t\t\t\t\tmessage_id: item.id\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (result.retCode === 200) {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: result.success,\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: result.message || '发送失败',\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error('发送短信失败', error);\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: error.message,\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 加载更多\n\t\t\tloadMore() {\n\t\t\t\tif (!this.hasMoreData) return;\n\t\t\t\t\n\t\t\t\tthis.page++;\n\t\t\t\tthis.loadMessageList(false);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.container {\n\t\tmin-height: 100vh;\n\t\tbackground-color: #f5f7fa;\n\t\tpadding: 15px;\n\t\tpadding-bottom: 80px; /* 为tabbar预留空间 */\n\t}\n\t\n\t.header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 15px;\n\t}\n\t\n\t.header-title {\n\t\tfont-size: 18px;\n\t\tfont-weight: bold;\n\t\tcolor: #303133;\n\t}\n\t\n\t.filter-dropdown {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tfont-size: 14px;\n\t\tcolor: #409EFF;\n\t}\n\t\n\t.dropdown-icon {\n\t\tmargin-left: 5px;\n\t\tfont-size: 12px;\n\t}\n\t\n\t.filter-dropdown-menu {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 4px;\n\t\tbox-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n\t\tmargin-bottom: 15px;\n\t\toverflow: hidden;\n\t}\n\t\n\t.filter-item {\n\t\tpadding: 12px 15px;\n\t\tfont-size: 14px;\n\t\tcolor: #606266;\n\t\tborder-bottom: 1px solid #ebeef5;\n\t}\n\t\n\t.filter-item.active {\n\t\tcolor: #409EFF;\n\t\tbackground-color: #ecf5ff;\n\t}\n\t\n\t.filter-item:last-child {\n\t\tborder-bottom: none;\n\t}\n\t\n\t.action-bar {\n\t\tdisplay: flex;\n\t\tmargin-bottom: 15px;\n\t}\n\t\n\t.action-btn-small {\n\t\tbackground-color: #ecf5ff;\n\t\tcolor: #409EFF;\n\t\tpadding: 8px 12px;\n\t\tmargin-right: 10px;\n\t\tborder-radius: 4px;\n\t\tfont-size: 12px;\n\t}\n\t\n\t.message-list {\n\t\tmargin-bottom: 15px;\n\t}\n\t\n\t.empty-message {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 8px;\n\t\tpadding: 30px;\n\t\ttext-align: center;\n\t\tcolor: #909399;\n\t\tbox-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n\t}\n\t\n\t.message-item {\n\t\tdisplay: flex;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 8px;\n\t\tpadding: 15px;\n\t\tmargin-bottom: 10px;\n\t\tbox-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n\t}\n\t\n\t.message-unread {\n\t\tborder-left: 3px solid #409EFF;\n\t}\n\t\n\t.checkbox {\n\t\tmargin-right: 10px;\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tpadding-top: 3px;\n\t}\n\t\n\t.checkbox-inner {\n\t\twidth: 18px;\n\t\theight: 18px;\n\t\tborder: 1px solid #dcdfe6;\n\t\tborder-radius: 2px;\n\t\tposition: relative;\n\t}\n\t\n\t.checkbox-inner.checked {\n\t\tbackground-color: #409EFF;\n\t\tborder-color: #409EFF;\n\t}\n\t\n\t.checkbox-inner.checked::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tleft: 6px;\n\t\ttop: 2px;\n\t\twidth: 4px;\n\t\theight: 8px;\n\t\tborder: solid white;\n\t\tborder-width: 0 2px 2px 0;\n\t\ttransform: rotate(45deg);\n\t}\n\t\n\t.message-content {\n\t\tflex: 1;\n\t}\n\t\n\t.message-header {\n\t\tmargin-bottom: 8px;\n\t}\n\t\n\t.message-names {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tflex: 1;\n\t}\n\t\n\t.name-tag {\n\t\tfont-size: 12px;\n\t\tcolor: #606266;\n\t\tbackground-color: #f5f7fa;\n\t\tpadding: 2px 6px;\n\t\tborder-radius: 4px;\n\t\tmargin-right: 6px;\n\t\tmargin-bottom: 6px;\n\t}\n\t\n\t.message-time {\n\t\tfont-size: 12px;\n\t\tcolor: #909399;\n\t\twhite-space: nowrap;\n\t}\n\t\n\t.message-body {\n\t\tmargin-bottom: 10px;\n\t}\n\t\n\t.message-text {\n\t\tfont-size: 14px;\n\t\tcolor: #303133;\n\t\tline-height: 1.5;\n\t}\n\t\n\t.message-actions {\n\t\tdisplay: flex;\n\t\tborder-top: 1px solid #ebeef5;\n\t\tpadding-top: 10px;\n\t}\n\t\n\t.action-btn {\n\t\tmargin-right: 15px;\n\t\tfont-size: 12px;\n\t\tcolor: #409EFF;\n\t}\n\t\n\t.load-more {\n\t\ttext-align: center;\n\t\tcolor: #909399;\n\t\tfont-size: 14px;\n\t\tpadding: 10px 0;\n\t}\n</style>","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1752846156836\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}