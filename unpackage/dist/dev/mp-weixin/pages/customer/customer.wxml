<view class="container"><view class="search-bar"><view class="search-bar-wrap"><view class="search-input-wrap"><view class="search-icon"><text class="iconfont">ğŸ”</text></view><input class="search-input" type="text" placeholder="æœç´¢å®¢æˆ·å§“åæˆ–æ‰‹æœºå·" data-event-opts="{{[['confirm',[['handleSearch',['$event']]]],['input',[['__set_model',['','searchKey','$event',[]]]]]]}}" value="{{searchKey}}" bindconfirm="__e" bindinput="__e"/></view><view data-event-opts="{{[['tap',[['handleSearch',['$event']]]]]}}" class="search-btn" bindtap="__e">æœç´¢</view><view data-event-opts="{{[['tap',[['toggleFilterForm',['$event']]]]]}}" class="filter-btn" bindtap="__e"><text>ç­›é€‰</text><text class="filter-icon">{{showFilterForm?'â–²':'â–¼'}}</text></view></view><block wx:if="{{showFilterForm}}"><view class="filter-form"><view class="form-row"><view class="form-group"><text class="form-label">æ‰‹æœºå·</text><input class="form-select" style="height:30px;font-size:14px;" type="text" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" data-event-opts="{{[['input',[['__set_model',['','phone','$event',[]]]]]]}}" value="{{phone}}" bindinput="__e"/></view><view class="form-group"><text class="form-label">æ‰€å±éƒ¨é—¨</text><picker class="form-select" range="{{departmentOptions}}" data-event-opts="{{[['change',[['departmentChange',['$event']]]]]}}" bindchange="__e"><view class="picker-value">{{departmentOptions[currentDepartment]}}</view></picker></view></view><view class="form-row"><view class="form-group"><text class="form-label">å®¢æˆ·çŠ¶æ€</text><picker class="form-select" range="{{statusOptions}}" data-event-opts="{{[['change',[['statusChange',['$event']]]]]}}" bindchange="__e"><view class="picker-value">{{statusOptions[currentStatus]}}</view></picker></view><view class="form-group"><text class="form-label">å®¡æ‰¹çŠ¶æ€</text><picker class="form-select" range="{{approvalOptions}}" data-event-opts="{{[['change',[['approvalChange',['$event']]]]]}}" bindchange="__e"><view class="picker-value">{{approvalOptions[currentApproval]}}</view></picker></view></view></view></block></view><view class="{{['main',(showFilterForm)?'filter-shown':'',(!showFilterForm)?'filter-hidden':'']}}"><view class="customer-list"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="customer-item"><view class="item-main"><view class="customer-info"><view class="name-status"><text class="name">{{item.$orig.name||'æœªçŸ¥'}}</text><text class="{{['status','statusClass-'+(item.$orig.status||1)]}}">{{dictMaps.customerStatus[item.$orig.status]||'æœªçŸ¥çŠ¶æ€'}}</text></view><view class="phone"><text class="label">æ‰‹æœºå·:</text><text>{{item.$orig.phone||'æœªå¡«å†™'}}</text></view><view class="dept"><text class="label">æ‰€å±éƒ¨é—¨:</text><text>{{item.$orig.branch_name||'æœªåˆ†é…'}}</text></view><view class="dept"><text class="label">å®¢æˆ·ç±»å‹:</text><text>{{dictMaps.customerType[item.$orig.client_type]||'æœªçŸ¥ç±»å‹'}}</text></view><view class="manager"><text class="label">ä¸šåŠ¡å‘˜:</text><text>{{item.$orig.service_name||'æœªåˆ†é…'}}</text></view><block wx:if="{{item.$orig.product_name}}"><view class="manager"><text class="label">äº§å“å‘˜:</text><text>{{item.$orig.product_name}}</text></view></block><view class="create-time"><text class="label">åˆ›å»ºæ—¶é—´:</text><text>{{item.m0}}</text></view></view><view class="approval-status"><text class="{{['status-box','dealClass-'+(item.$orig.deal_status||1)]}}">{{''+(dictMaps.dealStatus[item.$orig.deal_status]||'æœªçŸ¥çŠ¶æ€')+''}}</text><block wx:if="{{item.$orig.age}}"><text class="client-age">{{item.$orig.age+"å²"}}</text></block><block wx:if="{{item.$orig.matrimony}}"><text class="marital-status">{{dictMaps.maritalStatus[item.$orig.matrimony]}}</text></block></view></view><view class="item-actions"><view data-event-opts="{{[['tap',[['goDetail',['$0'],[[['customerList','',index]]]]]]]}}" class="action-btn" bindtap="__e"><text class="iconfont icon-detail"></text><text>è¯¦æƒ…</text></view><view data-event-opts="{{[['tap',[['goEdit',['$0'],[[['customerList','',index]]]]]]]}}" class="action-btn" bindtap="__e"><text class="iconfont icon-edit"></text><text>ç¼–è¾‘</text></view><view data-event-opts="{{[['tap',[['goFollowup',['$0'],[[['customerList','',index]]]]]]]}}" class="action-btn" bindtap="__e"><text class="iconfont icon-comment"></text><text>è·Ÿè¿›è®°å½•</text></view><view data-event-opts="{{[['tap',[['updateStatus',['$0'],[[['customerList','',index]]]]]]]}}" class="action-btn" bindtap="__e"><text class="iconfont icon-status"></text><text>æ›´æ–°çŠ¶æ€</text></view><view data-event-opts="{{[['tap',[['transferCustomer',['$0'],[[['customerList','',index]]]]]]]}}" class="action-btn" bindtap="__e"><text class="iconfont icon-status"></text><text>ç§»äº¤äº§å“éƒ¨</text></view></view></view></block><block wx:if="{{$root.g0===0}}"><view class="empty-tip">æš‚æ— å®¢æˆ·æ•°æ®</view></block><block wx:if="{{totalCount>0}}"><view class="pagination"><view class="pagination-info">{{'å…± '+totalCount+" æ¡æ•°æ®ï¼Œå½“å‰é¡µ "+page+"/"+$root.g1+''}}</view><view class="pagination-btn-group"><view data-event-opts="{{[['tap',[['prevPage',['$event']]]]]}}" class="{{['pagination-btn',(page<=1)?'disabled':'']}}" bindtap="__e">ä¸Šä¸€é¡µ</view><view data-event-opts="{{[['tap',[['nextPage',['$event']]]]]}}" class="{{['pagination-btn',(page>=$root.g2)?'disabled':'']}}" bindtap="__e">ä¸‹ä¸€é¡µ</view></view></view></block></view><view data-event-opts="{{[['tap',[['goAdd',['$event']]]]]}}" class="add-fab" bindtap="__e"><text class="iconfont icon-add"></text></view></view></view>