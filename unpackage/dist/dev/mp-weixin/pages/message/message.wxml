<view class="container"><view class="action-bar"><view data-event-opts="{{[['tap',[['handleMarkAllRead',['$event']]]]]}}" class="action-btn-small" bindtap="__e"><text>标记已读</text></view><view data-event-opts="{{[['tap',[['handleDeleteSelected',['$event']]]]]}}" class="action-btn-small" bindtap="__e"><text>删除</text></view><view data-event-opts="{{[['tap',[['handleMarkAllAsRead',['$event']]]]]}}" class="action-btn-small" bindtap="__e"><text>全部已读</text></view><view data-event-opts="{{[['tap',[['handleDeleteAll',['$event']]]]]}}" class="action-btn-small" bindtap="__e"><text>全部删除</text></view></view><view class="message-list"><block wx:if="{{$root.g0===0}}"><view class="empty-message"><text>暂无消息</text></view></block><block wx:else><view><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['message-item',(item.$orig.status===0)?'message-unread':'']}}"><view class="checkbox"><view data-event-opts="{{[['tap',[['toggleSelect',['$0'],[[['messageList','',index,'id']]]]]]]}}" class="{{['checkbox-inner',(item.g1)?'checked':'']}}" bindtap="__e"></view></view><view data-event-opts="{{[['tap',[['showMessageDetail',['$0'],[[['messageList','',index]]]]]]]}}" class="message-content" bindtap="__e"><view class="message-header"><view class="message-names"><block wx:if="{{item.$orig.client_name}}"><text class="name-tag">{{"客户: "+item.$orig.client_name}}</text></block></view><text class="message-time">{{item.$orig.ctime||''}}</text></view><view class="message-body"><text class="message-text">{{item.$orig.info||''}}</text></view><view class="message-actions"><view data-event-opts="{{[['tap',[['handleDelete',['$0'],[[['messageList','',index,'id']]]]]]]}}" class="action-btn" catchtap="__e"><text>删除</text></view><block wx:if="{{item.$orig.status===0}}"><view data-event-opts="{{[['tap',[['handleMarkRead',['$0'],[[['messageList','',index,'id']]]]]]]}}" class="action-btn" catchtap="__e"><text>标为已读</text></view></block><view data-event-opts="{{[['tap',[['handleSendSMS',['$0'],[[['messageList','',index]]]]]]]}}" class="action-btn" catchtap="__e"><text>发送短信</text></view></view></view></view></block></view></block></view><block wx:if="{{$root.g2>0}}"><view data-event-opts="{{[['tap',[['loadMore',['$event']]]]]}}" class="load-more" bindtap="__e"><block wx:if="{{hasMoreData}}"><text>加载更多</text></block><block wx:else><text>没有更多数据了</text></block></view></block></view>